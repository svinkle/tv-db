(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{35:function(e,t,a){e.exports=a(85)},50:function(e,t){},80:function(e,t,a){},85:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(32),c=a.n(s),l=a(87),i=a(3),o=a(4),u=a(6),m=a(5),h=a(7),d=a(2),f=a(89),b=a(88),p=a(86),g=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e={background:"#000 url(".concat("","/images/tvs.jpg) 100% 50% no-repeat"),backgroundSize:"75%"};return r.a.createElement("header",{className:"header",style:e},r.a.createElement(p.a,{to:"".concat("","/"),className:"header__link logo"},"TV-Db"))}}]),t}(n.Component),E=a(1),v=a.n(E),w=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).clearError=e.clearError.bind(Object(d.a)(Object(d.a)(e))),e.floatLabel=e.floatLabel.bind(Object(d.a)(Object(d.a)(e))),e.handleSubmit=e.handleSubmit.bind(Object(d.a)(Object(d.a)(e))),e}return Object(h.a)(t,e),Object(o.a)(t,[{key:"clearError",value:function(){this.error.classList.contains("search__error-text--active")&&this.error.classList.remove("search__error-text--active")}},{key:"floatLabel",value:function(e){var t=e.type,a=e.target;"keyup"===t&&0!==a.value.length&&this.labelText.classList.add("search__label-text--floating"),"blur"===t&&0===a.value.length&&this.labelText.classList.remove("search__label-text--floating")}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.q.value?this.props.history.push("".concat("","/results/").concat(this.q.value)):(this.error.classList.add("search__error-text--active"),this.q.focus())}},{key:"render",value:function(){var e=this;return r.a.createElement("form",{action:"/",method:"GET",className:"search",role:"search",onSubmit:this.handleSubmit},r.a.createElement("label",{htmlFor:"q",className:"search__label"},r.a.createElement("span",{className:"search__label-text",ref:function(t){e.labelText=t}},"Your favourite show\u2026"),r.a.createElement("input",{type:"search",name:"q",id:"q",placeholder:"Your favourite show\u2026",autoComplete:"off",className:"search__input",onKeyDown:this.clearError,onKeyUp:this.floatLabel,onBlur:this.floatLabel,ref:function(t){e.q=t}}),r.a.createElement("span",{className:"search__error-text",ref:function(t){e.error=t}},"No favourite show? You must have at least one! Try again. ",r.a.createElement("span",{role:"img","aria-label":"","aria-hidden":"true"},"\ud83d\ude42"))),r.a.createElement("button",{className:"btn search__btn"},"Make\xa0It\xa0So\xa0",r.a.createElement("span",{role:"img","aria-label":"","aria-hidden":"true"},"\ud83d\udc49")))}}]),t}(n.Component);w.PropTypes={history:v.a.object.isRequired};var y=w,j=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("footer",{className:"footer",role:"contentinfo"},r.a.createElement("p",null,r.a.createElement("span",{className:"logo"},"TV-Db")," is"," ",r.a.createElement("span",{role:"img","aria-label":"coded"},"\u2328\ufe0f")," ","with"," ",r.a.createElement("span",{role:"img","aria-label":"love"},"\u2764\ufe0f")," ","by ",r.a.createElement("a",{href:"https://twitter.com/svinkle/"},"@svinkle"),". View the source on ",r.a.createElement("a",{href:"https://github.com/svinkle/tv-db"},"GitHub"),".",r.a.createElement("br",null),"This app is a demo component to the article"," ",r.a.createElement("a",{href:"https://medium.com/@svinkle/creating-accessible-react-apps-38dc1c2775cf"},"Creating Accessible React Apps"),".",r.a.createElement("br",null),"Data, images, and content via"," ",r.a.createElement("a",{href:"https://tvmaze.com/api"},"TVMaze API"),"."))}}]),t}(n.Component),O=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).state={loading:!0,results:null},e.fetchShowData=e.fetchShowData.bind(Object(d.a)(Object(d.a)(e))),e}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.fetchShowData()}},{key:"fetchShowData",value:function(){var e=this,t=this.props.showId;fetch("https://api.tvmaze.com/shows/".concat(t)).then(function(e){return e.json()}).then(function(t){e.setState({loading:!1,results:t})})}},{key:"render",value:function(){return this.state.loading?null:r.a.createElement(p.a,{to:"".concat("","/show/").concat(this.state.results.id),className:"show__link"},r.a.createElement("img",{src:this.state.results.image?this.state.results.image.medium.replace("http","https"):"http://via.placeholder.com/210x295/000000/ffffff/?text=".concat(this.state.results.name),alt:this.state.results.name,className:"show__image"}))}}]),t}(n.Component);O.PropTypes={showId:v.a.string.isRequired};var k=O,_=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).container=r.a.createRef(),e.watching=[526,587,431,82,73,83,582,107,994],e}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){document.title="TV-Db",this.container.current.focus(),window.scrollTo(0,0)}},{key:"render",value:function(){return r.a.createElement("div",{"aria-labelledby":"pageTitle",className:"container",ref:this.container,role:"region",tabIndex:"-1"},r.a.createElement(g,null),r.a.createElement("main",{className:"main"},r.a.createElement("h1",{id:"pageTitle",className:"heading heading--1 home__title center"},"Search ",r.a.createElement("span",{className:"logo"},"TV-Db")," for your favourite TV shows!"),r.a.createElement(y,{history:this.props.history}),r.a.createElement("h2",{className:"heading heading--2 center"},"Check out what we're watching!"),r.a.createElement("ul",{className:"show__list"},this.watching.map(function(e){return r.a.createElement("li",{className:"show__list-item",key:e},r.a.createElement(k,{showId:e}))}))),r.a.createElement(j,null))}}]),t}(n.Component),N=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).container=r.a.createRef(),e}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.container.current.focus()}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement(g,null),r.a.createElement("main",{className:"main"},r.a.createElement("div",{"aria-label":"Loading\u2026",className:"loader",ref:this.container,role:"region",tabIndex:"-1"},r.a.createElement("img",{src:"".concat("","/images/loading.gif"),alt:"",className:"loader__image"}))),r.a.createElement(j,null))}}]),t}(n.Component),T=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"visuallyhidden",role:"status","aria-live":"polite","aria-atomic":"true"},this.props.message)}}]),t}(r.a.Component);T.PropTypes={message:v.a.string.isRequired};var D=T,S=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).container=r.a.createRef(),e.fetchShowData=e.fetchShowData.bind(Object(d.a)(Object(d.a)(e))),e.state={loading:!0,results:null,q:null,announcementMessage:null},e}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.q;document.title="Loading\u2026 | TV-Db",this.fetchShowData(e),window.scrollTo(0,0)}},{key:"fetchShowData",value:function(e){var t=this;setTimeout(function(){fetch("https://api.tvmaze.com/search/shows?q=".concat(e,"&page=2")).then(function(e){return e.json()}).then(function(a){t.setState({loading:!1,results:a,q:e,announcementMessage:"Total results found: ".concat(a.length)}),document.title='Search Results for "'.concat(e,'" | TV-Db'),t.container.current.focus()})},750)}},{key:"render",value:function(){return this.state.loading?r.a.createElement(N,null):r.a.createElement("div",{"aria-labelledby":"pageTitle",className:"container",ref:this.container,role:"region",tabIndex:"-1"},r.a.createElement(g,null),r.a.createElement("main",{className:"main"},r.a.createElement("h1",{id:"pageTitle",className:"heading heading--1"},'Search Results for "',this.state.q,'":'),r.a.createElement("ul",{className:"show__list"},this.state.results.map(function(e){return r.a.createElement("li",{className:"show__list-item",key:e.show.id},r.a.createElement(k,{showId:e.show.id}))}))),r.a.createElement(j,null),r.a.createElement(D,{message:this.state.announcementMessage}))}}]),t}(n.Component),x=a(33),L=a.n(x),q=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).container=r.a.createRef(),e.fetchShowData=e.fetchShowData.bind(Object(d.a)(Object(d.a)(e))),e.state={loading:!0,results:null},e}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){document.title="Loading\u2026 | TV-Db",this.fetchShowData(),window.scrollTo(0,0)}},{key:"fetchShowData",value:function(){var e=this,t=this.props.match.params.id;setTimeout(function(){fetch("https://api.tvmaze.com/shows/".concat(t)).then(function(e){return e.json()}).then(function(t){e.setState({loading:!1,results:t}),document.title="Show Details: ".concat(e.state.results.name," | TV-Db"),e.container.current.focus()})},750)}},{key:"render",value:function(){return this.state.loading?r.a.createElement(N,null):r.a.createElement("div",{"aria-labelledby":"pageTitle",className:"container",ref:this.container,role:"region",tabIndex:"-1"},r.a.createElement(g,null),r.a.createElement("main",{className:"main"},r.a.createElement("h1",{id:"pageTitle",className:"details__title heading heading--1"},this.state.results.name),r.a.createElement("div",{className:"grid"},r.a.createElement("div",{className:"grid__item"},r.a.createElement("img",{src:this.state.results.image?this.state.results.image.medium.replace("http","https"):"http://via.placeholder.com/210x295/000000/ffffff/?text=".concat(this.state.results.name),alt:"",className:"details__image","aria-hidden":"true"})),r.a.createElement("div",{className:"grid__item"},r.a.createElement("h2",{className:"details__subtitle heading heading--2"},"Summary"),L()(this.state.results.summary),r.a.createElement("h2",{className:"details__subtitle heading heading--2"},"Details"),r.a.createElement("table",{className:"details__table"},r.a.createElement("tbody",null,this.state.results.genres?r.a.createElement("tr",null,r.a.createElement("th",{scope:"row",id:"genre"},"Genre"),r.a.createElement("td",null,r.a.createElement("ul",{className:"details__genere-list","aria-labelledby":"genre"},this.state.results.genres.map(function(e){return r.a.createElement("li",{key:e},e)})))):"",this.state.results.type?r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Type"),r.a.createElement("td",null,this.state.results.type)):"",this.state.results.network?r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Network"),r.a.createElement("td",null,this.state.results.network.name,","," ",this.state.results.network.country.name)):"",this.state.results.rating?r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Rating"),r.a.createElement("td",null,this.state.results.rating.average,r.a.createElement("span",{"aria-hidden":"true"},"/"),r.a.createElement("span",{className:"visuallyhidden"},"out of"),"10")):"")),r.a.createElement("h2",{className:"details__subtitle heading heading--2"},"More Info"),r.a.createElement("ul",null,this.state.results.externals.imdb?r.a.createElement("li",null,r.a.createElement("a",{href:"http://imdb.com/title/".concat(this.state.results.externals.imdb,"/"),className:"details__more-link",target:"_blank",rel:"nofollow"},"Check out ",this.state.results.name," on IMDb!"," ",r.a.createElement("span",{role:"img","aria-label":", opens third-party website in new window"},"\ud83d\udc49"))):"",r.a.createElement("li",null,r.a.createElement("a",{href:"https://youtube.com/results?search_query=".concat(this.state.results.name),className:"details__more-link",target:"_blank",rel:"nofollow"},"Find out what YouTube has available for"," ",this.state.results.name," ",r.a.createElement("span",{role:"img","aria-label":", opens third-party website in new window"},"\ud83d\udcfa"))))))),r.a.createElement(j,null))}}]),t}(n.Component),C=(a(80),function(e){function t(){var e;return Object(i.a)(this,t),e=Object(u.a)(this,Object(m.a)(t).call(this)),a(83).load({google:{families:["Erica One","Open Sans:300,400,700"]}}),e.keyboardFocus=e.keyboardFocus.bind(Object(d.a)(Object(d.a)(e))),e.mouseFocus=e.mouseFocus.bind(Object(d.a)(Object(d.a)(e))),document.addEventListener("keyup",e.keyboardFocus),document.addEventListener("mousedown",e.mouseFocus),e}return Object(h.a)(t,e),Object(o.a)(t,[{key:"keyboardFocus",value:function(e){this.app.contains(e.target)?this.app.classList.add("app--has-focus"):this.app.classList.remove("app--has-focus")}},{key:"mouseFocus",value:function(e){this.app.contains(e.target)&&this.app.classList.remove("app--has-focus")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"app",ref:function(t){e.app=t}},r.a.createElement(f.a,{basename:"/",render:function(e){var t=e.location;return r.a.createElement(b.a,{key:t.key,location:t},r.a.createElement(f.a,{exact:!0,path:"".concat("","/"),component:_,key:t.key}),r.a.createElement(f.a,{path:"".concat("","/results/:q"),component:S,key:t.key}),r.a.createElement(f.a,{path:"".concat("","/show/:id"),component:q,key:t.key}))}}))}}]),t}(n.Component)),I=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function M(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}c.a.render(r.a.createElement(l.a,null,r.a.createElement(C,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");I?function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):M(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e):M(e)})}}()}},[[35,2,1]]]);
//# sourceMappingURL=main.6131cea4.chunk.js.map